<app-template>

    <!--------------------------------------------------------------------------
    ---                              NAVBAR                                  ---
    --------------------------------------------------------------------------->

    <app-medium-button class="navbar-button" [routerLink]="['/child-config']" routerLinkActive="active"><p class="name">
        <app-user-card [user]="user" class="horizontal navbar"/>
    </app-medium-button>
    <app-medium-button class="navbar-button" [routerLink]="['/child-play']" routerLinkActive="active"> Jouer </app-medium-button>
    <app-medium-button class="navbar-button" [routerLink]="['/child-stats']" routerLinkActive="active"> Mon classement </app-medium-button>



    <!--------------------------------------------------------------------------
    ---                               MAIN                                   ---
    --------------------------------------------------------------------------->

    <app-side-box class="main-box button-list">
        <app-small-button
            [routerLink]="[]"
            [queryParams]="{ 'section': 0 }"
            [class.active]="currSection === 0"
            style="width: 100%;"
        >
            <!-- [ngClass]="[currSection === 0 ? 'active' : '']" -->
            <!-- [class.active]="currSection === 0" -->
            Stats
        </app-small-button>

        <p>HISTORIQUE :</p>

        <app-small-button
            *ngFor="let i of availableHistorySections;"
            [routerLink]="[]"
            [queryParams]="{ 'section': i+1 }"
            [class.active]="currSection === i+1"
            style="width: 100%;"
        >
            {{ getFormattedGameDateByIndex(i, false) }}
        </app-small-button>
    </app-side-box>

    <!-- Invalid Section : -->
    <app-inner-box *ngIf="isInInvalidSection()" class="main-box blue medium">
        <p>Contenu Inexistant</p>
    </app-inner-box>

    <!-- Statistic Section : -->
    <app-inner-box *ngIf="isInStatsSection()" class="main-box blue medium">
        <h1 class="title">Statistiques générales</h1>

        <p>Note : {{ sectionData.playerStats.statistics.globalGrading.grade }} ({{ sectionData.playerStats.statistics.globalGrading.accuracy }}%)  (+{{ sectionData.playerStats.statistics.globalAccuracyImprovement }}%)</p>

        <app-rollable-box
            *ngIf="notionGradings.length > 0"
            [title]="'Détails par notions :'"
        >
            <app-grading-line
                *ngFor="let n of notionGradings"
                [key]="n.key"
                [grading]="n.grading"
                [improvement]="n.improvement"
            />
        </app-rollable-box>
    </app-inner-box>
    <app-inner-box *ngIf="isInStatsSection()" class="main-box blue little">
        <h1 class="title">Classment</h1>
        <p>Classement Indisponible</p>
    </app-inner-box>

    <!-- History Sections : -->
    <app-inner-box *ngIf="isInHistorySections()" class="main-box blue medium scrollable">
        <h1 class="title">Partie du {{ getFormattedGameDate(true) }}</h1>

        <p>Note : {{ sectionData.playerResults.results.globalGrading.grade }} ({{sectionData.playerResults.results.globalGrading.accuracy}}%)</p>

        <app-rollable-box
            *ngIf="notionGradings.length > 0"
            [title]="'Détails par notions :'"
        >
            <app-grading-line
                *ngFor="let n of notionGradings"
                [key]="n.key"
                [grading]="n.grading"
            />
        </app-rollable-box>

        <p>
            Réponse affichées :
            <span [style.color]="sectionData.playerResults.answersShown ? 'green' : 'red'">
                {{ sectionData.playerResults.answersShown ? "Oui" : "Non" }}
            </span>
        </p>
    </app-inner-box>
    <app-inner-box *ngIf="isInHistorySections()" class="main-box blue little">
        <h1 class="title">Classment</h1>
        <app-user-card
            *ngFor="let lbuserId of sectionData.leaderboard!.ranking"
            [userId]="lbuserId"
            class="horizontal"
        />
    </app-inner-box>

</app-template>